import{P}from"./p.js";import{define}from"trans-render/define.js";import{up}from"trans-render/hydrate.js";import{NavDown}from"xtal-element/NavDown.js";const m="m";export class PD extends P{constructor(){super(...arguments),this._pdNavDown=null,this._m=1/0,this._iIP=!1}static get is(){return"p-d"}get m(){return this._m}set m(t){this.attr(m,t.toString())}static get observedAttributes(){return super.observedAttributes.concat([m])}pass(t){this._lastEvent=t,this.attr("pds","ðŸŒ©ï¸");const s=this.applyProps(this._pdNavDown);this.attr("pds","ðŸ‘‚"),this.attr("mtch",s.toString())}getMatches(t){return t.matches}applyProps(t){if(this._iIP)return 0;const s=this.getMatches(t);return s.forEach(s=>{t._inMutLoop&&"1"!==s.dataset.__pdWIP||this.setVal(this._lastEvent,s)}),s.length}attributeChangedCallback(t,s,e){switch(t){case m:null!==e&&(this._m=parseInt(e))}super.attributeChangedCallback(t,s,e)}newNavDown(){const t=this.applyProps.bind(this);return new NavDown(this,this.to,t,this.m)}connectedCallback(){this[up]([m]),this.attr("pds","ðŸ“ž"),this.to||(this.to="*",this.m=1);const t=this.newNavDown();t.ignore="p-d,p-d-x,p-d-r,script",this._iIP=!0,t.init(),this._iIP=!1,this._pdNavDown=t,super.connectedCallback()}}define(PD);